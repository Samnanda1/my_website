---
categories:  
- ""    #the front matter should be like the one found in, e.g., blog2.md. It cannot be like the normal Rmd we used
- ""
date: "2021-09-30"
description: Project on Airbnb's in Montreal # the title that will show up once someone gets to this page
draft: false
#image: spices.jpg # save picture in \static\img\blogs. Acceptable formats= jpg, jpeg, or png . Your iPhone pics wont work
keywords: ""
slug: airbnb # slug is the shorthand URL address... no spaces plz
title: Project on Airbnb's in Montreal
---



<h2>
Introduction
<h2>
<h4>
<p>As part of a group project at LBS, we were given a project of analysing an Airbnb data set of properties in Montreal, Canada. We were then tasked with using the data to predict the price of a couple renting a property for 4 nights. However before undertaking the task, we had to clean the data, and perform exploratory data analysis. This was my task in the group, and so below you will see my findings.</p>
<h2>
Analysing the Full Data Frame
<h2>
<h4>
Initially glimpsing the data, there are 12540 observations of 74 variables, however not all of these will have an effect on price, such as the host_Url. Therefore we manually removed such variables, along with filtering by minimum no of nights less than 4 and accommodates 2 or more people. We called this data set newlistings1.
<h4>
<pre class="r"><code>newlistings1 &lt;- listings %&gt;%
  mutate(price = parse_number(price)) %&gt;%
  filter(minimum_nights &lt;= 4) %&gt;%
  filter(accommodates &gt;= 2) %&gt;%
  mutate(Property_Type = case_when(
    property_type %in% c(
      &quot;Entire rental unit&quot;,
      &quot;Private room in rental unit&quot;,
      &quot;Entire condominium (condo)&quot;,
      &quot;Entire loft&quot;
    ) ~ property_type,
    TRUE ~ &quot;Other&quot;
  ))


## neighbourhood_cleansed (28), room_type (33), last_review (60), license (68), prop_type_simplified (75)
newlistings1 = newlistings1[-c(1:12,
                               13:15,
                               19:21,
                               23,
                               27:29,
                               30:33,
                               35,
                               43:50,
                               53:55,
                               59,
                               60,
                               68,
                               70:73)] ## D&amp;A change 1:8, where 8 is host_since

favstats(~price, data = newlistings1)</code></pre>
<table class="huxtable" style="border-collapse: collapse; border: 0px; margin-bottom: 2em; margin-top: 2em; ; margin-left: auto; margin-right: auto;  " id="tab:unnamed-chunk-2">
<col><col><col><col><col><col><col><col><col><tr>
<th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0.4pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">min</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">Q1</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">median</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">Q3</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">max</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">mean</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">sd</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">n</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0.4pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">missing</th></tr>
<tr>
<td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0.4pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(242, 242, 242); font-weight: normal;">0</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(242, 242, 242); font-weight: normal;">60</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(242, 242, 242); font-weight: normal;">95</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(242, 242, 242); font-weight: normal;">149</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(242, 242, 242); font-weight: normal;">1.2e+04</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(242, 242, 242); font-weight: normal;">137</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(242, 242, 242); font-weight: normal;">231</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(242, 242, 242); font-weight: normal;">7400</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0.4pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(242, 242, 242); font-weight: normal;">0</td></tr>
</table>

<h4>
A glimpse of data newlistings1, reveals we now have 7400 observations with 30 variables, this is much more accessible date, however we noticed that there are a few price anomalies. Therefore using a summary function of price, we used 2 standard deviations from the mean to remove these anomalous prices in a new df called newlistings 2. Along with this we mutated some of the variables for example, converting host_verifications to numbers and making host acceptance rate to percentage.
<h4>
<h4>
Using favstats, we also get a summary of the price data, such as the mean price; £136.9
<h4>
<pre class="r"><code>newlistings1 %&gt;%
  summarise(AV = mean(price),
            SD = sd(price))</code></pre>
<table class="huxtable" style="border-collapse: collapse; border: 0px; margin-bottom: 2em; margin-top: 2em; ; margin-left: auto; margin-right: auto;  " id="tab:unnamed-chunk-4">
<col><col><tr>
<th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0.4pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">AV</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0.4pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">SD</th></tr>
<tr>
<td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0.4pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(242, 242, 242); font-weight: normal;">137</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0.4pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(242, 242, 242); font-weight: normal;">231</td></tr>
</table>

<pre class="r"><code>newlistings2 &lt;- newlistings1 %&gt;%
  filter(price &lt;= 598.8833)  %&gt;%
  ## added to count the number of &quot;verification&quot; and amenities -- D&amp;A
  mutate(host_verifications = stringr::str_count(host_verifications, &#39;,&#39;) + 1) %&gt;%
  mutate(amenities = stringr::str_count(amenities, &#39;,&#39;) + 1) %&gt;%
  
  ## transform character into numerics
  mutate(host_response_rate = as.numeric(sub(&quot;%&quot;, &quot;&quot;, host_response_rate)) /
           100) %&gt;%
  mutate(host_acceptance_rate = as.numeric(sub(&quot;%&quot;, &quot;&quot;, host_acceptance_rate)) /
           100) %&gt;%
  
  ## create new variable checking if there are shared bathrooms or not
  mutate(shared_bathroom = grepl(&quot;shared&quot;, bathrooms_text, fixed = TRUE)) %&gt;%
  
  ## convert &quot;bathroom text&quot; into a numeric
  mutate(bathrooms_text = as.numeric(sapply(strsplit(bathrooms_text, &quot; &quot;), &quot;[[&quot;, 1))) </code></pre>
<h2>
<p>EDA 1</p>
<h4>
Now we can start to use EDA on this new dataframe, Step 1, Glimpsing the data:
<h4>
<pre class="r"><code>favstats(~price, data = newlistings2)</code></pre>
<table class="huxtable" style="border-collapse: collapse; border: 0px; margin-bottom: 2em; margin-top: 2em; ; margin-left: auto; margin-right: auto;  " id="tab:unnamed-chunk-6">
<col><col><col><col><col><col><col><col><col><tr>
<th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0.4pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">min</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">Q1</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">median</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">Q3</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">max</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">mean</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">sd</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">n</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0.4pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: bold;">missing</th></tr>
<tr>
<td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0.4pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(242, 242, 242); font-weight: normal;">0</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(242, 242, 242); font-weight: normal;">59</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(242, 242, 242); font-weight: normal;">94</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(242, 242, 242); font-weight: normal;">143</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(242, 242, 242); font-weight: normal;">597</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(242, 242, 242); font-weight: normal;">115</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(242, 242, 242); font-weight: normal;">86</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(242, 242, 242); font-weight: normal;">7250</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0.4pt 0.4pt 0.4pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(242, 242, 242); font-weight: normal;">0</td></tr>
</table>

<h4>
Here we see there are now 7250 observation due to removing the price anomalies, and there are 31 variables, as we created a new variable; whether or not different guests at the properties have to share bathrooms, as we believed this would be important in determining price. Using favstat we can see that the mean has decreased slightly, however the SD has decreased by 3x.
<h4>
<h2>
EDA 2
<h2>
<h4>
Using this, we can see; there are 1 character variable, 5 logics and 25 numeric variables.
<h4>
<h2>
EDA 3
<h2>
<h4>
Now i have performed initial anaylsis, i decided to experiment with several plots;
<h4>
<h3>
Plot 1
<h3>
<p><img src="/blogs/airbnb_files/figure-html/unnamed-chunk-8-1.png" width="2100" /></p>
<h4>
The above plot shows the price of the AirBnB against the amenities they offer, colored by property type. From the graph it shows little correlation between price and amenities. We believe this is the case because the price of the amenities are fairly low, such as hair dryers, heating, bed linen etc, therefore no matter if the price of the accommodation is low it is still feasible to afford the amenities. The plot does show however that the majority of the properties have a price less than $200, but less of a correlation between price and property type for the others.
<h4>
<h4>
However there is a correlation between price and private rooms. These are all clustered in the &lt;£200 section with a few outliers, this could be due to the lack of desire to share a house with others and therefore it drives the price of the property down.
<h4>
<h3>
Plot 2
<h3>
<p><img src="/blogs/airbnb_files/figure-html/unnamed-chunk-9-1.png" width="2100" /></p>
<h4>
This plot is the same as the above, however we have decided to use log of price as it produces a more normal distribution, it is here a lot clearer to see the shared rooms are the most affordable ones, and further shows lack of correlation between the others. We will continue therefore to use log price from now on.
<h4>
<p>&lt;h3 Plot 3 &amp; 4&gt;
<img src="/blogs/airbnb_files/figure-html/unnamed-chunk-10-1.png" width="2100" /><img src="/blogs/airbnb_files/figure-html/unnamed-chunk-10-2.png" width="2100" /></p>
<h4>
The above plots shows a histogram for the price of the properties one with logscale one without. It is clear from the first graph there is positively skewed distrubution, and by using the log scale it normalises it. This is better for regression models. In both plots we can use the mean line to see the mean price is around £115.
<h4>
<h5>
Plot 5
<h5>
<p><img src="/blogs/airbnb_files/figure-html/unnamed-chunk-11-1.png" width="2100" /></p>
<h4>
This plot shows a great negative skew to the 5* rating, i.e. the majority of ratings are 5<em>. As the ratings are high, before doing any analysis it could suggest that this may mean reviews don’t have much bearing on price because, the majority of reviews are 5</em>, however not all the prices are high.
<h4>
<h2>
Plot 6
<h2>
<p><img src="/blogs/airbnb_files/figure-html/unnamed-chunk-12-1.png" width="2100" /></p>
<h4>
The boxplot shows super host to log price, clearly the mean price for the superhosts are greater than that of those who aren’t. I would suggest this is because, super hosts are seen to be superior and therefore can charge more, especially if this correlates with having more amenities, better response time etc. Surprisingly however the most expensive property is for someone without a super host status. The super hosts on the other hand have a greater minimum price because they know they can charge more for the property. The IQR and range is smaller for super hosts, this could be because they know how much they can charge, compared to normal hosts who may have less experience with Airbnb.
<h4>
<h3>
Plot 7
<h3>
<p><img src="/blogs/airbnb_files/figure-html/unnamed-chunk-13-1.png" width="2100" /></p>
<h4>
Using ggpairs i can see correlations between variables. The greatest correlation is number of bedrooms and number the property sleeps. This is expected as the more rooms the more the property can sleep. The 2nd highest correlation is between review value and review location, this must be because there nicer the location the greater the review. This is expected, better locations better reviews. Correlations between availability and reviews are negatively correlated slightly. This suggest the more availability the worse the review, which makes sense. If the property is free more often this could be because it isn’t the best property which would bring with it worse reviews.
<h4>
<h4>
Accommodates, bathrooms, bedrooms, price, availability all have a positive skew, whilst reviews have a negative skew.
<h4>
<h3>
This is the start of our project, i hope to update it as it continues, so feel free to visit again!
<h3>
